(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{187:function(s,e,n){s.exports=n.p+"assets/img/15.72a8413a.png"},188:function(s,e,n){s.exports=n.p+"assets/img/16.de4d36d0.png"},209:function(s,e,n){"use strict";n.r(e);var a=n(0),t=Object(a.a)({},function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"redis初识"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redis初识","aria-hidden":"true"}},[s._v("#")]),s._v(" Redis初识")]),s._v(" "),a("h2",{attrs:{id:"redis是什么？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redis是什么？","aria-hidden":"true"}},[s._v("#")]),s._v(" Redis是什么？")]),s._v(" "),a("p",[s._v("一个开源的使用ANSI C语言编写（Salvatore Sanfilippo）、遵守BSD协议、支持网络、可基于内存亦可持久化的日志型、高性能的Key-Value存储服务系统")]),s._v(" "),a("h2",{attrs:{id:"redis特性："}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redis特性：","aria-hidden":"true"}},[s._v("#")]),s._v(" Redis特性：")]),s._v(" "),a("ul",[a("li",[s._v("速度快 - Redis能读的速度是110000次/s,写的速度是81000次/s。\n"),a("ul",[a("li",[s._v("c语言实现，距离系统底层更近")]),s._v(" "),a("li",[s._v("数据都在内存中")]),s._v(" "),a("li",[s._v("单线程，避免线程切换开销以及多线程的竞争问题")]),s._v(" "),a("li",[s._v("采用epoll模型，非阻塞I/O，不在网络上浪费时间")])])]),s._v(" "),a("li",[s._v("丰富的数据类型 – Redis支持String（字符串）、List（列表）、Hash（哈希）、Set（集合）及Ordered Set/ZSet(有序集合)等五种主要的数据类型。\n"),a("ul",[a("li",[s._v("BitMaps 位图 布隆过滤器")]),s._v(" "),a("li",[s._v("HyperLoglog 超小内存唯一值计数")]),s._v(" "),a("li",[s._v("GEO 地理信息定位")])])]),s._v(" "),a("li",[s._v("丰富的特性 – Redis还支持慢查询分析、性能测试、Pipeline、事务、Lua自定义命令、Bitmaps、HyperLogLog（2.8.19版本以后提供）、发布/订阅、Geo（3.2版本以后提供）等个性化功能。\n"),a("ul",[a("li",[s._v("可设置键过期")]),s._v(" "),a("li",[s._v("给予发布订阅可实现简单的消息队列")]),s._v(" "),a("li",[s._v("通过Lua创建新命令，具有原子性")]),s._v(" "),a("li",[s._v("Popeline功能，减少网络开销")])])]),s._v(" "),a("li",[s._v("支持数据持久化 - Redis支持数据的持久化，可以将内存中的数据保持在磁盘中，重启的时候可以再次加载进行使用。（RDB/AOF两种方式实现持久化）")]),s._v(" "),a("li",[s._v("支持的客户端语言多（基于TCP协议进行通信），比如PHP/Golang/Java/Python等")]),s._v(" "),a("li",[s._v("服务器简单\n"),a("ul",[a("li",[s._v("代码优雅 - （早期单机版核心代码:23000 lines code）")]),s._v(" "),a("li",[s._v("采用单线程模型，减少竞争，规避并发问题")]),s._v(" "),a("li",[s._v("不依赖操作系统类库（比如libevent），如多路复用Redis自己实现了")])])]),s._v(" "),a("li",[s._v("主从复制\n"),a("ul",[a("li",[s._v("主服务器上的数据可以同步到从服务器上，是高可用及分布式的功能的基础")])])]),s._v(" "),a("li",[s._v("高可用/分布式\n"),a("ul",[a("li",[s._v("高可用 - Redis-Sentinel(v2.8)支持高可用")]),s._v(" "),a("li",[s._v("分布式 - Redis-Cluster(v3.0)支持分布式")])])])]),s._v(" "),a("h2",{attrs:{id:"redis的典型应用场景"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redis的典型应用场景","aria-hidden":"true"}},[s._v("#")]),s._v(" Redis的典型应用场景")]),s._v(" "),a("ul",[a("li",[s._v("缓存系统 - 作为数据库中数据的缓存，应用先访问缓存，如果缓存中有数据，则直接返回；如果没有则从数据库中获取返回，并同时将数据存入缓存，方便下次读取")]),s._v(" "),a("li",[s._v("计数器 - 比如微博的转发数、评论数")]),s._v(" "),a("li",[s._v("消息队列系统")]),s._v(" "),a("li",[s._v("排行榜 - 有序集合")]),s._v(" "),a("li",[s._v("社交网络")]),s._v(" "),a("li",[s._v("实时系统 - 布隆过滤器（Bitmap）实现实时的垃圾邮件处理系统")])]),s._v(" "),a("h2",{attrs:{id:"redis的安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redis的安装","aria-hidden":"true"}},[s._v("#")]),s._v(" Redis的安装")]),s._v(" "),a("h3",{attrs:{id:"下载并安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#下载并安装","aria-hidden":"true"}},[s._v("#")]),s._v(" 下载并安装")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("在Linux环境下操作，需要安装gcc（yum install gcc-c++）")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("wget http://download.redis.io/releases/redis-3.0.7.tar.gz\ntar -zxvf redis-3.0.7.tar.gz\nln -s redis-3.0.7 redis\ncd redis\nmake && make install\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("安装好Redis后，其可执行文件位于/usr/local/bin下，可在任意位置下执行该文件，同时编译成功后，在解压目录src目录下，也有可执行文件：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("[root@test src]# ll | grep redis-\n-rwxr-xr-x. 1 root root 4589163 7月  11 02:56 redis-benchmark\n-rw-rw-r--. 1 root root   28351 1月  25 2016 redis-benchmark.c\n-rw-r--r--. 1 root root   63200 7月  11 02:56 redis-benchmark.o\n-rwxr-xr-x. 1 root root   22225 7月  11 02:56 redis-check-aof\n-rw-rw-r--. 1 root root    6328 1月  25 2016 redis-check-aof.c\n-rw-r--r--. 1 root root   20680 7月  11 02:56 redis-check-aof.o\n-rwxr-xr-x. 1 root root   45435 7月  11 02:56 redis-check-dump\n-rw-rw-r--. 1 root root   22274 1月  25 2016 redis-check-dump.c\n-rw-r--r--. 1 root root   45408 7月  11 02:56 redis-check-dump.o\n-rwxr-xr-x. 1 root root 4698370 7月  11 02:56 redis-cli\n-rw-rw-r--. 1 root root   75872 1月  25 2016 redis-cli.c\n-rw-r--r--. 1 root root  193944 7月  11 02:56 redis-cli.o\n-rwxr-xr-x. 1 root root 6471159 7月  11 02:56 redis-sentinel\n-rwxr-xr-x. 1 root root 6471159 7月  11 02:56 redis-server\n-rwxrwxr-x. 1 root root   60527 1月  25 2016 redis-trib.rb\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])])])]),s._v(" "),a("h3",{attrs:{id:"可执行文件说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#可执行文件说明","aria-hidden":"true"}},[s._v("#")]),s._v(" 可执行文件说明")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[s._v("文件名")]),s._v(" "),a("th",{staticStyle:{"text-align":"left"}},[s._v("作用")])])]),s._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[s._v("redis-server")]),s._v(" "),a("td",{staticStyle:{"text-align":"left"}},[s._v("Redis服务器")])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[s._v("redis-cli")]),s._v(" "),a("td",{staticStyle:{"text-align":"left"}},[s._v("Redis命令行客户端")])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[s._v("redis-benchmark")]),s._v(" "),a("td",{staticStyle:{"text-align":"left"}},[s._v("Redis性能测试")])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[s._v("redis-check-aof")]),s._v(" "),a("td",{staticStyle:{"text-align":"left"}},[s._v("AOF文件修复工具")])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[s._v("redis-check-dump")]),s._v(" "),a("td",{staticStyle:{"text-align":"left"}},[s._v("RDB文件修复工具")])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[s._v("redis-sentinel")]),s._v(" "),a("td",{staticStyle:{"text-align":"left"}},[s._v("Sentinel服务器(2.8以后）")])])])]),s._v(" "),a("h3",{attrs:{id:"三种启动方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三种启动方式","aria-hidden":"true"}},[s._v("#")]),s._v(" 三种启动方式")]),s._v(" "),a("ol",[a("li",[s._v("最简单启动：\n"),a("ul",[a("li",[s._v("redis安装编译后直接运行bin/redis-server，使用默认配置启动，默认端口为6379")]),s._v(" "),a("li",[s._v("ps -ef|grep redis (查看redis进程）")]),s._v(" "),a("li",[s._v("netstat -antpl|grep redis（查看redis所占用的端口）")]),s._v(" "),a("li",[s._v("redis-cli -h ip -p port ping（使用Redis命令行客户端连接服务器，指定ip和port，如果不指定则为默认值localhost:6379，并运行ping命令）（使用exit可退出命令行客户端）"),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('[root@test redis]# /usr/local/bin/redis-cli -h 127.0.0.1 -p 6379\n127.0.0.1:6379> ping\nPONG\n127.0.0.1:6379> set hello world\nOK\n127.0.0.1:6379> get hello\n"world"\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])])]),s._v(" "),a("li",[s._v('图中用"ping"命令测试，当返回"pong"时，说明连接成功，并set值（string类型），key为"hello"，value为"world"，get hello则返回其value')])])]),s._v(" "),a("li",[s._v("动态参数启动：\n"),a("ul",[a("li",[s._v("运行redis-server --port 6380 (指定启动端口为6380)")])])]),s._v(" "),a("li",[s._v("配置文件启动：\n"),a("ul",[a("li",[s._v("运行redis-server configFile （使用配置文件的方式启动）")])])])]),s._v(" "),a("h3",{attrs:{id:"三种启动方式的比较"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三种启动方式的比较","aria-hidden":"true"}},[s._v("#")]),s._v(" 三种启动方式的比较")]),s._v(" "),a("ul",[a("li",[s._v("生产环境建议选择配置文件启动")]),s._v(" "),a("li",[s._v("单机多实例配置文件可以使用端口号区分开")])]),s._v(" "),a("h3",{attrs:{id:"停止redis"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#停止redis","aria-hidden":"true"}},[s._v("#")]),s._v(" 停止redis")]),s._v(" "),a("ul",[a("li",[s._v("运行redis-cli -p 6379 shutdown （停止在此端口运行的Redis，默认端口为6379）"),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("[root@test redis]# redis-cli -p 6379 shutdown\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),s._v("日志打印出："),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("33184:M 11 Jul 08:24:13.412 # User requested shutdown...\n33184:M 11 Jul 08:24:13.412 * Saving the final RDB snapshot before exiting.\n33184:M 11 Jul 08:24:13.425 * DB saved on disk\n33184:M 11 Jul 08:24:13.425 # Redis is now ready to exit, bye bye...\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])]),s._v(" "),a("li",[s._v("shutdown有一个参数，代表是否在关闭Redis前，生成持久化文件："),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("redis-cli shutdown nosave|save\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[s._v("还可以通过kill进程号的方式关闭redis服务，但是不能通过kill -9强制杀死redis的服务。如果强制杀死redis服务不会进行持久化操作，也不会对缓冲区资源优雅关闭，还可能丢失数据。")])]),s._v(" "),a("h2",{attrs:{id:"redis客户端及常用配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redis客户端及常用配置","aria-hidden":"true"}},[s._v("#")]),s._v(" Redis客户端及常用配置")]),s._v(" "),a("ol",[a("li",[s._v("Redis客户端返回值\n"),a("ol",[a("li",[s._v("状态回复："),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("127.0.0.1:6379> ping\nPONG\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[s._v("错误回复："),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("127.0.0.1:6379> hget hello field\n(error) WRONGTYPE Operation against a key holding the wrong kind of value\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[s._v("整数回复："),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("127.0.0.1:6379> set index 0\nOK\n127.0.0.1:6379> incr index\n(integer) 1\n127.0.0.1:6379> decr index\n(integer) 0\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])])]),s._v(" "),a("li",[s._v("字符串回复："),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('127.0.0.1:6379> set hello world\nOK\n127.0.0.1:6379> get hello\n"world"\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])]),s._v(" "),a("li",[s._v("多行字符串回复："),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('127.0.0.1:6379> mset hello world hi redis\nOK\n127.0.0.1:6379> mget hello hi\n1) "world"\n2) "redis"\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])])])])]),s._v(" "),a("li",[s._v("Redis常用配置\n"),a("ol",[a("li",[s._v("daemonize：是否以守护进程的方式启动Redis，默认为no")]),s._v(" "),a("li",[s._v("port：Redis对外的端口，使用单机多实例配置启动时必须要配置端口号，否则会冲突，默认端口号为6379")]),s._v(" "),a("li",[s._v("logfile：指定Redis的系统日志的文件名")]),s._v(" "),a("li",[s._v("dir：指定Redis的工作目录的目录名字"),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('daemonize yes\nport 6380\nlogfile "6380.log"\ndir ./ \n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])]),s._v(" "),a("li",[s._v("其他如RDB config、AOF config、slow Log config、maxMemory等")]),s._v(" "),a("li",[s._v("查看配置信息：在Redis客户端命令行中输入config get *，查看配置信息，key-value形式，总共130行共65个配置："),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('127.0.0.1:6379> config get *\n1) "dbfilename"\n2) "dump.rdb"\n3) "requirepass"\n4) ""\n5) "masterauth"\n6) ""\n7) "unixsocket"\n8) ""\n9) "logfile"\n10) ""\n11) "pidfile"\n12) "/var/run/redis.pid"\n13) "maxmemory"\n14) "0"\n15) "maxmemory-samples"\n16) "5"\n17) "timeout"\n18) "0"\n19) "tcp-keepalive"\n20) "0"\n21) "auto-aof-rewrite-percentage"\n22) "100"\n23) "auto-aof-rewrite-min-size"\n24) "67108864"\n25) "hash-max-ziplist-entries"\n26) "512"\n27) "hash-max-ziplist-value"\n28) "64"\n29) "list-max-ziplist-entries"\n30) "512"\n31) "list-max-ziplist-value"\n32) "64"\n33) "set-max-intset-entries"\n34) "512"\n35) "zset-max-ziplist-entries"\n36) "128"\n37) "zset-max-ziplist-value"\n38) "64"\n39) "hll-sparse-max-bytes"\n40) "3000"\n41) "lua-time-limit"\n42) "5000"\n43) "slowlog-log-slower-than"\n44) "10000"\n45) "latency-monitor-threshold"\n46) "0"\n47) "slowlog-max-len"\n48) "128"\n49) "port"\n50) "6379"\n51) "tcp-backlog"\n52) "511"\n53) "databases"\n54) "16"\n55) "repl-ping-slave-period"\n56) "10"\n57) "repl-timeout"\n58) "60"\n59) "repl-backlog-size"\n60) "1048576"\n61) "repl-backlog-ttl"\n62) "3600"\n63) "maxclients"\n64) "10000"\n65) "watchdog-period"\n66) "0"\n67) "slave-priority"\n68) "100"\n69) "min-slaves-to-write"\n70) "0"\n71) "min-slaves-max-lag"\n72) "10"\n73) "hz"\n74) "10"\n75) "cluster-node-timeout"\n76) "15000"\n77) "cluster-migration-barrier"\n78) "1"\n79) "cluster-slave-validity-factor"\n80) "10"\n81) "repl-diskless-sync-delay"\n82) "5"\n83) "cluster-require-full-coverage"\n84) "yes"\n85) "no-appendfsync-on-rewrite"\n86) "no"\n87) "slave-serve-stale-data"\n88) "yes"\n89) "slave-read-only"\n90) "yes"\n91) "stop-writes-on-bgsave-error"\n92) "yes"\n93) "daemonize"\n94) "no"\n95) "rdbcompression"\n96) "yes"\n97) "rdbchecksum"\n98) "yes"\n99) "activerehashing"\n100) "yes"\n101) "repl-disable-tcp-nodelay"\n102) "no"\n103) "repl-diskless-sync"\n104) "no"\n105) "aof-rewrite-incremental-fsync"\n106) "yes"\n107) "aof-load-truncated"\n108) "yes"\n109) "appendonly"\n110) "no"\n111) "dir"\n112) "/opt/software/redis-3.0.7/src"\n113) "maxmemory-policy"\n114) "noeviction"\n115) "appendfsync"\n116) "everysec"\n117) "save"\n118) "3600 1 300 100 60 10000"\n119) "loglevel"\n120) "notice"\n121) "client-output-buffer-limit"\n122) "normal 0 0 0 slave 268435456 67108864 60 pubsub 33554432 8388608 60"\n123) "unixsocketperm"\n124) "0"\n125) "slaveof"\n126) ""\n127) "notify-keyspace-events"\n128) ""\n129) "bind"\n130) ""\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br"),a("span",{staticClass:"line-number"},[s._v("89")]),a("br"),a("span",{staticClass:"line-number"},[s._v("90")]),a("br"),a("span",{staticClass:"line-number"},[s._v("91")]),a("br"),a("span",{staticClass:"line-number"},[s._v("92")]),a("br"),a("span",{staticClass:"line-number"},[s._v("93")]),a("br"),a("span",{staticClass:"line-number"},[s._v("94")]),a("br"),a("span",{staticClass:"line-number"},[s._v("95")]),a("br"),a("span",{staticClass:"line-number"},[s._v("96")]),a("br"),a("span",{staticClass:"line-number"},[s._v("97")]),a("br"),a("span",{staticClass:"line-number"},[s._v("98")]),a("br"),a("span",{staticClass:"line-number"},[s._v("99")]),a("br"),a("span",{staticClass:"line-number"},[s._v("100")]),a("br"),a("span",{staticClass:"line-number"},[s._v("101")]),a("br"),a("span",{staticClass:"line-number"},[s._v("102")]),a("br"),a("span",{staticClass:"line-number"},[s._v("103")]),a("br"),a("span",{staticClass:"line-number"},[s._v("104")]),a("br"),a("span",{staticClass:"line-number"},[s._v("105")]),a("br"),a("span",{staticClass:"line-number"},[s._v("106")]),a("br"),a("span",{staticClass:"line-number"},[s._v("107")]),a("br"),a("span",{staticClass:"line-number"},[s._v("108")]),a("br"),a("span",{staticClass:"line-number"},[s._v("109")]),a("br"),a("span",{staticClass:"line-number"},[s._v("110")]),a("br"),a("span",{staticClass:"line-number"},[s._v("111")]),a("br"),a("span",{staticClass:"line-number"},[s._v("112")]),a("br"),a("span",{staticClass:"line-number"},[s._v("113")]),a("br"),a("span",{staticClass:"line-number"},[s._v("114")]),a("br"),a("span",{staticClass:"line-number"},[s._v("115")]),a("br"),a("span",{staticClass:"line-number"},[s._v("116")]),a("br"),a("span",{staticClass:"line-number"},[s._v("117")]),a("br"),a("span",{staticClass:"line-number"},[s._v("118")]),a("br"),a("span",{staticClass:"line-number"},[s._v("119")]),a("br"),a("span",{staticClass:"line-number"},[s._v("120")]),a("br"),a("span",{staticClass:"line-number"},[s._v("121")]),a("br"),a("span",{staticClass:"line-number"},[s._v("122")]),a("br"),a("span",{staticClass:"line-number"},[s._v("123")]),a("br"),a("span",{staticClass:"line-number"},[s._v("124")]),a("br"),a("span",{staticClass:"line-number"},[s._v("125")]),a("br"),a("span",{staticClass:"line-number"},[s._v("126")]),a("br"),a("span",{staticClass:"line-number"},[s._v("127")]),a("br"),a("span",{staticClass:"line-number"},[s._v("128")]),a("br"),a("span",{staticClass:"line-number"},[s._v("129")]),a("br"),a("span",{staticClass:"line-number"},[s._v("130")]),a("br"),a("span",{staticClass:"line-number"},[s._v("131")]),a("br")])])])])]),s._v(" "),a("li",[s._v("(示例)采用不同的配置文件启动多个Redis，分别以6381、6382端口:\n"),a("ol",[a("li",[s._v("以原始文件redis.conf为模本修改对应的配置文件"),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('[root@test redis]# cat redis.conf | grep -v "#" | grep -v "^$" > redis.6381.conf\n[root@test redis]# cat redis.conf | grep -v "#" | grep -v "^$" > redis.6382.conf \n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[s._v("分别修改redis.6381.conf、redis.6382.conf"),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('daemonize yes\nport 6381\nlogfile "6381.log"\ndir "/opt/software/redis-3.0.7/data" \n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('daemonize yes\nport 6382\nlogfile "6382.log"\ndir "/opt/software/redis-3.0.7/data" \n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])]),s._v(" "),a("li",[s._v("创建data目录，否则启动报错"),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("[root@test redis]# redis-server redis.6381.conf\n33283:C 11 Jul 08:49:55.232 # Can't chdir to '/opt/software/redis-3.0.7/data': No such file or directory\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("[root@test redis]# mkdir data\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[s._v("启动两个Redis进程\n"),a("ol",[a("li",[s._v("启动端口号为6381的redis:"),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("[root@test redis]# redis-server redis.6381.conf\n[root@test redis]# ps -ef|grep redis\nroot      33302      1  0 08:52 ?        00:00:00 redis-server *:6381\nroot      33306   2574  0 08:52 pts/0    00:00:00 grep redis\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])]),s._v(" "),a("li",[s._v("日志记录在6381.log文件中:"),a("img",{attrs:{src:n(187),alt:"查看6381日志"}})]),s._v(" "),a("li",[s._v("启动端口号为6382的redis:"),a("img",{attrs:{src:n(188),alt:"6382启动"}})])])])])])])])},[],!1,null,null,null);e.default=t.exports}}]);